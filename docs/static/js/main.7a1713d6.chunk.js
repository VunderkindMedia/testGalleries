(this.webpackJsonptest_gallery=this.webpackJsonptest_gallery||[]).push([[0],{28:function(e,t,n){},29:function(e,t,n){},43:function(e,t,n){"use strict";n.r(t);var a=n(0),r=n.n(a),c=n(21),i=n.n(c),l=(n(28),n(11)),s=n(2),o=(n(29),n(4)),u=Object(a.createContext)(),d=n(1),j=function(e){var t=e.color,n=void 0===t?"#16a085":t,a=e.moreClassName,r=e.title,c=void 0===r?"Button":r,i=e.onClick,l=void 0===i?function(){}:i,s=e.disabled,o=void 0!==s&&s;return Object(d.jsx)("div",{style:{backgroundColor:o?"#6c6c6c":n},className:a?"button ".concat(a):"button",onClick:function(){!o&&l()},children:c})},p=function(e){var t=e.children,n=e.onChange,r=Object(a.useRef)(null),c=Object(a.useState)(!1),i=Object(o.a)(c,2),l=i[0],s=i[1],u=Object(a.useState)(0),j=Object(o.a)(u,2),p=j[0],f=j[1];Object(a.useEffect)((function(){0===p&&s(!1)}),[p]);var b=function(e){e.preventDefault(),e.stopPropagation()},_=function(e){e.preventDefault(),e.stopPropagation(),f((function(e){return e+1})),s(!0)},v=function(e){e.preventDefault(),e.stopPropagation(),f((function(e){return e-1}))},m=function(e){e.preventDefault(),e.stopPropagation(),s(!1),f(0),n(e.dataTransfer.files)};return Object(a.useEffect)((function(){var e=r.current;return e.addEventListener("dragenter",_),e.addEventListener("dragleave",v),e.addEventListener("dragover",b),e.addEventListener("drop",m),function(){e.removeEventListener("dragenter",_),e.removeEventListener("dragleave",v),e.removeEventListener("dragover",b),e.removeEventListener("drop",m)}}),[]),Object(d.jsxs)("div",{className:"dd_upload_provider",ref:r,children:[l&&Object(d.jsx)("div",{className:"dd_upload_provider__modal"}),t]})},f=function(){var e=Object(s.f)(),t=Object(a.useState)([]),n=Object(o.a)(t,2),r=n[0],c=n[1],i=Object(a.useState)(null),l=Object(o.a)(i,2),f=l[0],b=l[1],_=Object(a.useState)(null),v=Object(o.a)(_,2),m=v[0],g=v[1],O=Object(a.useState)(""),h=Object(o.a)(O,2),x=h[0],y=h[1],N=Object(a.useState)(null),C=Object(o.a)(N,2),w=C[0],k=C[1],E=Object(a.useContext)(u),S=E.uploadImages,L=E.dragUploadImage,I=E.onUploadFromUrl,U=Object(a.useRef)(null),P=function(e){k(null),g(null),e.length>0?Object.values(e).some((function(e){return"image/jpeg"===e.type||"image/png"===e.type}))?(b(null),c(Object.values(e).filter((function(e){return"image/jpeg"===e.type||"image/png"===e.type})))):(c([]),k("\u0424\u0430\u0439\u043b \u0438\u043c\u0435\u0435\u0442 \u043d\u0435\u0432\u0435\u0440\u043d\u044b\u0439 \u0442\u0438\u043f.")):k("\u0424\u0430\u0439\u043b\u044b \u043d\u0435 \u0432\u044b\u0431\u0440\u0430\u043d\u044b.")},F=function(t){"application/json"===t.type?S(t).then((function(){e.push("/gallery")})).catch((function(e){return g(e)})):(L(t),e.push("/gallery"))};return Object(d.jsx)("div",{className:"files_upload_provider",children:Object(d.jsxs)("div",{className:"files_upload_provider__form",children:[Object(d.jsx)("div",{className:"files_upload_provider__description_wrapper",children:Object(d.jsxs)(p,{onChange:function(e){return P(e)},children:[Object(d.jsx)("p",{className:"files_upload_provider__description",children:"\u0414\u043b\u044f \u0432\u044b\u0431\u043e\u0440\u0430 \u0444\u0430\u0439\u043b\u043e\u0432 \u043d\u0430\u0436\u043c\u0438\u0442\u0435 \u043d\u0430 \u044d\u0442\u0443 \u043e\u0431\u043b\u0430\u0441\u0442\u044c \u0438\u043b\u0438 \u043f\u0435\u0440\u0435\u0442\u044f\u043d\u0438\u0442\u0435 \u0438\u0437\u043e\u0431\u0440\u0430\u0436\u0435\u043d\u0438\u044f"}),Object(d.jsx)("p",{className:"files_upload_provider__subtitle",children:"(\u0412\u044b\u0431\u0435\u0440\u0438\u0442\u0435 \u0444\u0430\u0439\u043b\u044b \u0438\u0437\u043e\u0431\u0440\u0430\u0436\u0435\u043d\u0438\u0439)"}),r&&r.map((function(e,t){return Object(d.jsxs)("p",{className:"files_upload_provider__subtitle green",children:[t+1,". ",e.name]},e.name+t)})),w&&Object(d.jsx)("p",{className:"files_upload_provider__subtitle red",children:w}),Object(d.jsx)("input",{ref:U,className:"files_upload_provider__click_input",type:"file",onChange:function(e){return P(e.target.files)},multiple:!0})]})}),Object(d.jsx)("p",{className:"files_upload_provider__subtitle",children:"- \u0438\u043b\u0438 -"}),Object(d.jsx)("input",{className:"files_upload_provider__url_input",placeholder:"\u0412\u0432\u0435\u0434\u0438\u0442\u0435 URL \u0438\u0437\u043e\u0431\u0440\u0430\u0436\u0435\u043d\u0438\u044f",onChange:function(e){return t=e.target.value,(f||r)&&(b(null),c([])),void y(t);var t}}),Object(d.jsx)("p",{className:"files_upload_provider__subtitle",children:"- \u0438\u043b\u0438 -"}),Object(d.jsxs)("label",{className:"files_upload_provider__json_wrapper",children:[Object(d.jsx)("input",{name:"file",type:"file",className:"files_upload_provider__json_input",onChange:function(e){return t=e.target.files,console.log(t),k(null),g(null),void(t.length>0?"application/json"===t[0].type?(c([]),b(t[0])):(b(null),g("\u0424\u0430\u0439\u043b \u0438\u043c\u0435\u0435\u0442 \u043d\u0435\u0432\u0435\u0440\u043d\u044b\u0439 \u0442\u0438\u043f.")):k("\u0424\u0430\u0439\u043b\u044b \u043d\u0435 \u0432\u044b\u0431\u0440\u0430\u043d\u044b."));var t}}),Object(d.jsx)("div",{className:"files_upload_provider__json_div button ",children:"\u041e\u0431\u0437\u043e\u0440..."}),Object(d.jsx)("p",{style:{flex:1},className:"files_upload_provider__subtitle ".concat(m&&"red"," ").concat(f&&"green"),children:m||(null===f||void 0===f?void 0:f.name)||"\u0412\u044b\u0431\u0440\u0430\u0442\u044c JSON \u0444\u0430\u0439\u043b"})]}),Object(d.jsx)(j,{disabled:!r,moreClassName:"files_upload_provider__upload_button",title:"\u0417\u0430\u0433\u0440\u0443\u0437\u0438\u0442\u044c \u0438\u0437\u043e\u0431\u0440\u0430\u0436\u0435\u043d\u0438\u044f \u0432 \u0433\u0430\u043b\u043b\u0435\u0440\u0435\u044e",onClick:function(){0!==r.length?(console.log("image"),F(r)):f?(console.log("json"),F(f)):(I(x),e.push("/gallery"))}})]})})},b=n(8),_=function(e){var t=e.color,n=void 0===t?"#68af58":t,a=e.size,r=void 0===a?80:a,c=Object(b.a)(Array(4)).map((function(e,t){return Object(d.jsx)("div",{style:{background:"".concat(n)}},t)}));return Object(d.jsx)("div",{className:"activity_indicator",children:Object(d.jsx)("div",{className:"activity_indicator__indicator",style:{width:r,height:r},children:c})})},v=function(e){var t=e.question,n=e.onClick,a=e.icon,r=e.color,c=void 0===r?"red":r,i=e.prefix;return Object(d.jsx)("div",{className:"".concat(i,"__delete_btn"),onClick:function(){window.confirm(t)&&n()},children:Object(d.jsx)("i",{className:a,style:{color:c}})})},m=function(){var e=Object(s.f)(),t=Object(a.useContext)(u),n=t.images,r=t.deleteImage,c=Object(a.useState)(!0),i=Object(o.a)(c,2),l=i[0],p=i[1];Object(a.useEffect)((function(){setTimeout((function(){p(!1)}),1500)}),[]);var f=function(){e.replace("/")};return Object(d.jsx)("div",{className:"wrapper",children:l?Object(d.jsx)(_,{}):Object(d.jsxs)("div",{className:"gallery",children:[n.length>0&&Object(d.jsx)(j,{title:"\u0417\u0430\u0433\u0440\u0443\u0437\u0438\u0442\u044c \u0435\u0449\u0435",moreClassName:"gallery__more",onClick:f}),Object(d.jsx)("div",{className:"gallery__layout",children:n.length>0?n.map((function(e,t){return Object(d.jsxs)("div",{className:"gallery__image_wrapper",children:[Object(d.jsx)("img",{className:"gallery__image",alt:"description",src:e.url}),Object(d.jsx)(v,{prefix:"gallery",question:"\u0412\u044b \u0434\u0435\u0439\u0441\u0442\u0432\u0438\u0442\u0435\u043b\u044c\u043d\u043e \u0445\u043e\u0442\u0438\u0442\u0435 \u0443\u0434\u0430\u043b\u0438\u0442\u044c \u0434\u0430\u043d\u043d\u043e\u0435 \u0438\u0437\u043e\u0431\u0440\u0430\u0436\u0435\u043d\u0438\u0435?",icon:"fa fa-trash",title:"\u0423\u0434\u0430\u043b\u0438\u0442\u044c",onClick:function(){return function(e){r(e)}(t)}})]},e.url+t)})):Object(d.jsxs)("div",{className:"gallery__is_empty",children:[Object(d.jsx)("p",{children:"\u0418\u0437\u043e\u0431\u0440\u0430\u0436\u0435\u043d\u0438\u044f \u043e\u0442\u0441\u0443\u0442\u0441\u0442\u0432\u0443\u044e\u0442"}),Object(d.jsx)(j,{title:"\u0417\u0430\u0433\u0440\u0443\u0437\u0438\u0442\u044c \u0438\u0437\u043e\u0431\u0440\u0430\u0436\u0435\u043d\u0438\u044f",moreClassName:"",onClick:f})]})})]})})};var g=function(){return Object(d.jsx)(l.a,{children:Object(d.jsxs)(s.c,{children:[Object(d.jsx)(s.a,{exact:!0,path:"/",children:Object(d.jsx)(f,{})}),Object(d.jsx)(s.a,{path:"/gallery",children:Object(d.jsx)(m,{})})]})})},O=n(18),h=n.n(O),x=n(23),y=n(19),N="SET_IMAGES",C={images:[]};function w(e,t){switch(t.type){case N:return Object(y.a)(Object(y.a)({},e),{},{images:t.images});default:return e}}var k=function(e){var t=e.children,n=Object(a.useReducer)(w,C),r=Object(o.a)(n,2),c=r[0],i=r[1],l=function(){var e=Object(x.a)(h.a.mark((function e(t){return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",new Promise((function(e,n){var a=new FileReader;a.readAsText(t,"utf8"),a.onload=function(t){var a=JSON.parse(t.target.result);a.galleryImages?(i({type:N,images:[].concat(Object(b.a)(c.images),Object(b.a)(a.galleryImages))}),e(c.images)):n("\u041d\u0435\u0432\u0435\u0440\u043d\u0430\u044f \u0441\u0442\u0440\u0443\u043a\u0442\u0443\u0440\u0430 \u0444\u0430\u0439\u043b\u0430")}})));case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return Object(d.jsx)(u.Provider,{value:{images:c.images,dragUploadImage:function(e){var t=c.images,n=e.map((function(e){var t=new Image;return t.src=URL.createObjectURL(e),{url:t.src}}));i({type:N,images:[].concat(Object(b.a)(t),Object(b.a)(n))})},uploadImages:l,deleteImage:function(e){i({type:N,images:c.images.filter((function(t,n){return n!==e}))})},onUploadFromUrl:function(e){console.log(e),i({type:N,images:[].concat(Object(b.a)(c.images),[{url:e}])})}},children:t})},E=function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,44)).then((function(t){var n=t.getCLS,a=t.getFID,r=t.getFCP,c=t.getLCP,i=t.getTTFB;n(e),a(e),r(e),c(e),i(e)}))};i.a.render(Object(d.jsx)(r.a.StrictMode,{children:Object(d.jsx)(k,{children:Object(d.jsx)(g,{})})}),document.getElementById("root")),E()}},[[43,1,2]]]);
//# sourceMappingURL=main.7a1713d6.chunk.js.map